---
layout: post
title: "Linux系统安装--Windows环境下"
subtitle: "Windows环境下CentOS-7虚拟机安装与基础配置指南"
date: 2025-09-22
author: "Wenqin"
tags: [Linux] 
---

# Linux安装

**目标：** 成功安装并配置好第一台满足大数据学习环境基本要求的Linux虚拟机（`bigdata-node1`）。

**核心步骤：**

1. 准备VMware环境和Linux镜像
2. 在VMware中创建虚拟机
3. 安装CentOS-7操作系统
4. 进行系统首次启动后的基础配置（网络、主机名、防火墙、SELinux、软件源、常用工具等）



## 1. 环境准备

学习大数据课程需要准备：

- **虚拟机软件**
- **Linux系统镜像**
- **远程连接客户端工具**



### 1.1 虚拟机安装

#### 1.1.1 虚拟机简介

在只有一台计算机的情况下, 为了安装linux系统, 我们有两种方案: 

1. 使用双系统，在电脑开启的时候选择进入哪个操作系统，但不建议安装多个系统，一是浪费空间，二是可能造成系统不稳定。
2. 使用虚拟机，虚拟机就是Windows系统上的软件，通过软件来模拟一台电脑(计算机)。我们可以在虚拟机中安装Linux系统。
   ![image-20210416073225661](https://eo-oss.881119.xyz/Wenqin_Blog/Linux%E7%9B%B8%E5%85%B3%E5%91%BD%E4%BB%A4/Linux%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85/assets/image-20210416073225661.png)

虚拟机是一个软件，它可以使你在一台真实PC机器上同时运行两个或更多的操作系统，如：Windows或Linux。它可以模拟一个标准的PC环境，这个环境和真实的计算机一样，有芯片组、CPU、内存、显卡、声卡、网卡、软驱、硬盘、光驱、串口、并口、USB控制器。

目前市场上流行的虚拟机有两种：

1. VMware（威睿）公司的虚拟机软件，功能强大，收费产品，有30天试用期。(**我们选择这个**)
2. VirtualBox （甲骨文）公司的虚拟机软件，免费的商品。



#### 1.1.2 安装虚拟机

请参照以下VMware软件安装流程：

1、双击软件,开启安装向导

![img](https://eo-oss.881119.xyz/Wenqin_Blog/Linux%E7%9B%B8%E5%85%B3%E5%91%BD%E4%BB%A4/Linux%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85/assets/wps1.jpg) 

2、同意许可协议

![img](https://eo-oss.881119.xyz/Wenqin_Blog/Linux%E7%9B%B8%E5%85%B3%E5%91%BD%E4%BB%A4/Linux%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85/assets/wps2.jpg) 

3、选择安装位置

![img](https://eo-oss.881119.xyz/Wenqin_Blog/Linux%E7%9B%B8%E5%85%B3%E5%91%BD%E4%BB%A4/Linux%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85/assets/wps3.jpg) 

4、修改用户体验

![img](https://eo-oss.881119.xyz/Wenqin_Blog/Linux%E7%9B%B8%E5%85%B3%E5%91%BD%E4%BB%A4/Linux%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85/assets/wps4.jpg) 

5、开始安装

![img](https://eo-oss.881119.xyz/Wenqin_Blog/Linux%E7%9B%B8%E5%85%B3%E5%91%BD%E4%BB%A4/Linux%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85/assets/wps5.jpg) 

6、输入许可证

可使用提供的序列号或自行在网络上查找相应序列号



提示：VM安装成功的标志

![image-20250416114438087](https://eo-oss.881119.xyz/Wenqin_Blog/Linux%E7%9B%B8%E5%85%B3%E5%91%BD%E4%BB%A4/Linux%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85/assets/image-20250416114438087.png)

### 1.2 虚拟化一台计算机

实现步骤：

~~~
1. 使用vmware"创建新的虚拟机"
2. 选择自定义安装
3. 选择linux系统 CentOS7 64位
4. 指定安装路径，不建议C盘
5. 一直执行"下一步"
~~~

1、新建虚拟机

![img](https://eo-oss.881119.xyz/Wenqin_Blog/Linux%E7%9B%B8%E5%85%B3%E5%91%BD%E4%BB%A4/Linux%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85/assets/wps6.jpg) 

2、选择安装方式

 ![img](https://eo-oss.881119.xyz/Wenqin_Blog/Linux%E7%9B%B8%E5%85%B3%E5%91%BD%E4%BB%A4/Linux%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85/assets/wps7.jpg) 

3、选择虚拟机类型和版本

![img](https://eo-oss.881119.xyz/Wenqin_Blog/Linux%E7%9B%B8%E5%85%B3%E5%91%BD%E4%BB%A4/Linux%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85/assets/wps8.jpg) 

(如果只有Centos32位，而看不到Centos 64位的选项，请查看资料文件夹中图片: 开启虚拟化)

VT-X的错误: 开启虚拟化 (进入BIOS , 不同的主板进入的方式不一样, 搜索自己电脑主板如何进入)

![img](https://eo-oss.881119.xyz/Wenqin_Blog/Linux%E7%9B%B8%E5%85%B3%E5%91%BD%E4%BB%A4/Linux%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85/assets/wps9.jpg) 

4、选择虚拟机名称和位置

![img](https://eo-oss.881119.xyz/Wenqin_Blog/Linux%E7%9B%B8%E5%85%B3%E5%91%BD%E4%BB%A4/Linux%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85/assets/wps10.jpg) 

![img](https://eo-oss.881119.xyz/Wenqin_Blog/Linux%E7%9B%B8%E5%85%B3%E5%91%BD%E4%BB%A4/Linux%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85/assets/wps11.jpg) 

![img](https://eo-oss.881119.xyz/Wenqin_Blog/Linux%E7%9B%B8%E5%85%B3%E5%91%BD%E4%BB%A4/Linux%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85/assets/wps12.jpg) 



## 2. Linux系统概述与安装

### 2.1 Linux系统介绍

#### 2.1.1 Linux前身：Unix

**1968年  Multics项目**

- MIT、Bell实验室、美国通用电气有限公司走到了一起，致力于开发Multics项目。到后期由于开发进度不是很好，MIT和Bell实验室相继离开这个项目的开发，最终导致项目搁浅。

**1970年  Unix诞生**

- 当时在开发Multics项目的时候，实验室中有一个开发成员开发了一款游戏（travel space：遨游太空），因为两个实验室相继离开项目开发，导致这名开发人员没法玩游戏，后来他提议组织人员重新在Multics项目之上重新的开发，也就出现了1970年的Unix。当时Unix操作系统是使用的汇编语言（机器语言）开发的。

**1973年  用C语言重写Unix**

- 因为汇编语言有一个最大的局限性：对于计算机硬件过于依赖。导致移植性不好，所以后期在1973年使用了C语言对其进行重新开发。

**1975年  Bell实验室允许大学使用Unix**  

- 操作系统用于教学作用，而不允许用于商业用途

 

#### 2.1.2 Linux诞生

人物  Linus

![img](https://eo-oss.881119.xyz/Wenqin_Blog/Linux%E7%9B%B8%E5%85%B3%E5%91%BD%E4%BB%A4/Linux%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85/assets/wps13.jpg)

Linux的开发作者，Linux之父，李纳斯·托瓦兹。Linux诞生时李纳斯是荷兰在校大学生

1991年0.0.1版本linux 

> 李纳斯当时学校使用的就是Unix操作系统，因为创始人在上大学期间经常需要浏览新闻和处理邮件，发现Unix操作系统不是很好用, 于是对系统的底层代码进行了修改，并放到了学校为学生开放的网站上，最初他把文件命名写成了Linus’s Unix，后期网络管理员发现之后觉得这个名字不好，将名字改成Linux。后来经过全世界网友的支持, 现在能够兼容多种硬件，成为最为流行的服务器操作系统之一



#### 2.1.3 Linux系统特点

linux系统：

- 开源、免费、拥有最为庞大的源码贡献者
- 多用户、多任务
- 良好的用户界面、优异的性能与稳定性

> 多用户多任务：
> 单用户：一个用户，在登录计算机（操作系统），只能允许==同时==登录一个用户；
> 单任务：一个任务，允许用户==同时==进行的操作任务数量；
> 多用户：多个用户，在登录计算机（操作系统），允许==同时==登录多个用户进行操作；
> 多任务：多个任务，允许用户==同时==进行多个操作任务；
> Windows属于：单用户、多任务。
> Linux属于：多用户、多任务。

Linux系统结构：

 ![img](https://eo-oss.881119.xyz/Wenqin_Blog/Linux%E7%9B%B8%E5%85%B3%E5%91%BD%E4%BB%A4/Linux%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85/assets/wps14.jpg)

 

#### 2.1.4 Linux发行版本

对于Linux操作系统来说，其本身是一个整体，包括Linux内核、系统库和系统程序，Linux内核是其最基础的部分，它实现了对硬件资源的管理，并且提供了使用这些硬件资源的通用接口。

自1991年发布Linux内核来，很多公司加入其中，在内核的基础上构建了自己的操作系统版本，这个被称为Linux的发行版

![img](https://eo-oss.881119.xyz/Wenqin_Blog/Linux%E7%9B%B8%E5%85%B3%E5%91%BD%E4%BB%A4/Linux%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85/assets/wps15.jpg) 

Linux分支有很多，现在比较有名的ubuntu、**centos**、redhat等。

redhat：全球最大的linux发行厂商，功能全面、稳定。 （Redhat被IBM收购）

ubuntu：目前是linux桌面操作系统做的最好的。

centos：免费版的redhat。

- centos基于redhat发行版基础之上，再重新编译发布的版本

- 目前centos已经被Redhat公司收购，但是依然免费

deepin：目前国内做的最好的一款Linux发行版。

 

### 2.2 Linux系统安装

#### 2.2.1 安装centos系统

1、选择"编辑虚拟机设置", 选择提供的Linux系统centos7.iso镜像文件

![img](https://eo-oss.881119.xyz/Wenqin_Blog/Linux%E7%9B%B8%E5%85%B3%E5%91%BD%E4%BB%A4/Linux%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85/assets/wps16.jpg) 

2、开启虚拟机

![img](https://eo-oss.881119.xyz/Wenqin_Blog/Linux%E7%9B%B8%E5%85%B3%E5%91%BD%E4%BB%A4/Linux%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85/assets/wps17.jpg) 

3、鼠标点击进去虚拟机, 按 ctlr + alt退出到windows中

![img](https://eo-oss.881119.xyz/Wenqin_Blog/Linux%E7%9B%B8%E5%85%B3%E5%91%BD%E4%BB%A4/Linux%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85/assets/wps18.jpg) 

4、选择语言

![img](https://eo-oss.881119.xyz/Wenqin_Blog/Linux%E7%9B%B8%E5%85%B3%E5%91%BD%E4%BB%A4/Linux%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85/assets/wps19.jpg) 

5、软件选择

软件选择，选择"基本网页服务器" ->  "开发工具"

![img](https://eo-oss.881119.xyz/Wenqin_Blog/Linux%E7%9B%B8%E5%85%B3%E5%91%BD%E4%BB%A4/Linux%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85/assets/wps20.jpg) 

6、安装位置

![img](https://eo-oss.881119.xyz/Wenqin_Blog/Linux%E7%9B%B8%E5%85%B3%E5%91%BD%E4%BB%A4/Linux%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85/assets/wps21.jpg) 

7、网络连接

设置外网网卡打开

![img](https://eo-oss.881119.xyz/Wenqin_Blog/Linux%E7%9B%B8%E5%85%B3%E5%91%BD%E4%BB%A4/Linux%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85/assets/wps22.jpg) 

然后点击配置, 设置网卡自动连接

![img](https://eo-oss.881119.xyz/Wenqin_Blog/Linux%E7%9B%B8%E5%85%B3%E5%91%BD%E4%BB%A4/Linux%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85/assets/wps23.jpg) 

配置完成

![img](https://eo-oss.881119.xyz/Wenqin_Blog/Linux%E7%9B%B8%E5%85%B3%E5%91%BD%E4%BB%A4/Linux%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85/assets/wps24.jpg) 

8、开始安装

![img](https://eo-oss.881119.xyz/Wenqin_Blog/Linux%E7%9B%B8%E5%85%B3%E5%91%BD%E4%BB%A4/Linux%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85/assets/wps25.jpg) 

9、设置root密码

在安装过程中设置密码

![img](https://eo-oss.881119.xyz/Wenqin_Blog/Linux%E7%9B%B8%E5%85%B3%E5%91%BD%E4%BB%A4/Linux%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85/assets/wps26.jpg) 

密码设置为root，因为密码太短，点完成两次

![img](https://eo-oss.881119.xyz/Wenqin_Blog/Linux%E7%9B%B8%E5%85%B3%E5%91%BD%E4%BB%A4/Linux%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85/assets/wps27.jpg) 

安装中.......此处省去10分钟

10、安装完毕,重启系统

![img](https://eo-oss.881119.xyz/Wenqin_Blog/Linux%E7%9B%B8%E5%85%B3%E5%91%BD%E4%BB%A4/Linux%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85/assets/wps28.jpg) 11、登录Linux

![image-20250718144741732](https://eo-oss.881119.xyz/Wenqin_Blog/Linux%E7%9B%B8%E5%85%B3%E5%91%BD%E4%BB%A4/Linux%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85/assets/image-20250718144741732.png)





## 3. 远程连接工具

### 3.1 连通测试

首先在使用远程连接工具之前, 先测试linux虚拟机 和windows主机之间是否可以连通

| **命令**                | **功能说明**                               |
| ----------------------- | ------------------------------------------ |
| **ifconfig**            | linux中显示主机的IP地址                    |
| **ip addr**             | linux中显示主机的IP地址(同上)              |
| **ping** **网络IP地址** | 测试主机之间是否连通，如果超时表示连接不上 |

**疑问：windows主机与虚拟机linux系统为什么可以直接连通？**

因为window与linux在同一个局域网。分别查询windows的IP地址和Linux的IP地址

Linux的IP地址：**ifconfig**

![1565662740931](https://eo-oss.881119.xyz/Wenqin_Blog/Linux%E7%9B%B8%E5%85%B3%E5%91%BD%E4%BB%A4/Linux%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85/assets/1565662740931.png) 

Windows的IP地址：**ipconfig**

注意第3个数字：248，要一样才能在同一个局域中连接

![1565662789308](https://eo-oss.881119.xyz/Wenqin_Blog/Linux%E7%9B%B8%E5%85%B3%E5%91%BD%E4%BB%A4/Linux%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85/assets/1565662789308.png) 

测试网络是否连通

![1565663054811](https://eo-oss.881119.xyz/Wenqin_Blog/Linux%E7%9B%B8%E5%85%B3%E5%91%BD%E4%BB%A4/Linux%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85/assets/1565663054811.png) 

小结：

- 在虚拟机软件安装成功之后，会在本地windows系统下生成两个虚拟网卡： VMnet1、VMnet8

- 在本地windows中借用VMnet8虚拟网卡和虚拟机中的Linux系统分配的网卡进行数据互通（通信交互）

- 验证本地windows系统和虚拟机中的Linux系统之间的网络通信步骤：

  1. 在Linux系统中执行命令： `ifconfig`  或 `ip addr`

     - 可以查看到Linux系统中网络IP地址。  例：192.168.200.131

  2. 在windows系统中执行DOS命令：`ipconfig`

     - 确定本地windows系统中的VMnet8虚拟网卡的IP地址和linux系统中的IP地址是否属于同一个网段

       不属于同一个网段，无法进行有效网络通信

  3. 在windows系统中执行dos命令： `ping 192.168.200.131`

     - 执行ping去验证linux系统是否可以进行有效的网络通信



### 3.2 远程连接工具

用于连接linux的工具有很多，我们课程中使用：FinalShell

1、安装FinalShell

- 步骤1：把"资料"中提供的FinalShell压缩包，复制到一个纯英文路径下

  ![image-20250415195436487](https://eo-oss.881119.xyz/Wenqin_Blog/Linux%E7%9B%B8%E5%85%B3%E5%91%BD%E4%BB%A4/Linux%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85/assets/image-20250415195436487.png)

- 步骤2：进入到FinalShell目录下，运行程序

  ![image-20250415195621441](https://eo-oss.881119.xyz/Wenqin_Blog/Linux%E7%9B%B8%E5%85%B3%E5%91%BD%E4%BB%A4/Linux%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85/assets/image-20250415195621441.png)

- 步骤3：程序启动成功

  ![image-20250415195734147](https://eo-oss.881119.xyz/Wenqin_Blog/Linux%E7%9B%B8%E5%85%B3%E5%91%BD%E4%BB%A4/Linux%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85/assets/image-20250415195734147.png)

2、使用FinalShell客户端连接远程Linux服务器

步骤1：创建Linux远程连接

![image-20250415200012161](https://eo-oss.881119.xyz/Wenqin_Blog/Linux%E7%9B%B8%E5%85%B3%E5%91%BD%E4%BB%A4/Linux%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85/assets/image-20250415200012161.png)

步骤2：配置连接Linux服务器的各项参数

![image-20250415200400766](https://eo-oss.881119.xyz/Wenqin_Blog/Linux%E7%9B%B8%E5%85%B3%E5%91%BD%E4%BB%A4/Linux%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85/assets/image-20250415200400766.png)

步骤3：初次登录保存密钥

![image-20250415200431475](https://eo-oss.881119.xyz/Wenqin_Blog/Linux%E7%9B%B8%E5%85%B3%E5%91%BD%E4%BB%A4/Linux%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85/assets/image-20250415200431475.png)

步骤4：成功连接并登录

![image-20250415200555475](https://eo-oss.881119.xyz/Wenqin_Blog/Linux%E7%9B%B8%E5%85%B3%E5%91%BD%E4%BB%A4/Linux%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85/assets/image-20250415200555475.png)



## 4. 系统初始化

通常新安装的系统还很"粗糙"，需要进行一系列初始化配置，使其更稳定、更易用、更安全（或者说：更适合我们的实验环境）。

### 4.1 配置国内的YUM源

CentOS默认的YUM源可能在国外，国外访问速度较慢。可以更换为国内的镜像源，如阿里云、清华大学等，大幅提升 `yum install/update` 的速度。

操作步骤：

1. 备份现有源文件

   ```
   mv /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.bak
   ```

2. 下载阿里云的源配置文件

   ```
   wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo
   # 或者使用清华大学源
   # wget -O /etc/yum.repos.d/CentOS-Base.repo https://mirrors.tuna.tsinghua.edu.cn/help/CentOS-7.repo
   ```

   - *注意:* 如果 `wget` 下载 `https` 地址失败，可能需要先 `sudo yum install -y ca-certificates`。

3. 下载阿里云的EPEL源配置文件 (如果之前安装了epel-release)

   ```
   # 先备份（如果出现状况可以还原）
   mv /etc/yum.repos.d/epel.repo /etc/yum.repos.d/epel.repo.bak
   
   # 下载新的EPEL源配置文件
   wget -O /etc/yum.repos.d/epel.repo http://mirrors.aliyun.com/repo/epel-7.repo
   ```

4. 清除缓存并生成新缓存

   ```
   yum clean all
   yum makecache
   ```

   现在再执行 `yum update` 或 `yum install` 应该会快很多。



### 4.2 更新系统与安装必备工具

1、更新Linux系统软件包

获取最新的安全补丁和软件修复，保持系统稳定和安全。首次执行可能需要下载较多包，请耐心等待。

```
# 使用root用户执行
yum update -y

# 使用非root用户执行
# sudo yum update -y    # sudo:以管理员权限执行命令（第一次使用sudo时需要输入密码，后续短时间内不用再输入）
```

==补充说明：由于要下载和更新的软件过多(耗费网络和时间)，在学习期间，不建议执行`yum update`命令==

![image-20250415201547698](https://eo-oss.881119.xyz/Wenqin_Blog/Linux%E7%9B%B8%E5%85%B3%E5%91%BD%E4%BB%A4/Linux%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85/assets/image-20250415201547698.png)

- 命令解析:
  - `yum`: CentOS/RHEL系统的包管理器（用于安装、更新、卸载软件）。
  - `update`: 更新所有已安装的软件包到最新版本。
  - `-y`: 自动回答所有确认提示为"yes"，避免交互。

2、安装常用工具集

Linux环境下进行开发、运维、管理时的常用工具

```
yum install -y vim wget net-tools lrzsz tree zip unzip bash-completion epel-release ntpdate
```

- 命令解析 (工具说明):
  - `vim`: 强大的文本编辑器 (比系统自带的`vi`更好用)。
  - `wget`: 从网络下载文件的命令行工具。
  - `net-tools`: 包含 `ifconfig`, `netstat` 等传统网络工具（虽然 `ip` 命令是新的标准，但这些老工具有时也方便）。
  - `lrzsz`: 支持使用 XShell/SecureCRT 等终端工具通过 ZModem 协议上传(rz)和下载(sz)文件，非常方便。
  - `tree`: 以树状结构显示目录内容。
  - `zip`, `unzip`: 用于处理 `.zip` 压缩文件。
  - `bash-completion`: 增强Bash Shell的命令自动补全功能（按Tab键），提高效率。需要重新登录shell生效。
  - `epel-release`: EPEL (Extra Packages for Enterprise Linux) 是一个由 Fedora 社区维护的软件仓库，为 RHEL/CentOS 提供很多高质量的额外软件包。安装它之后可以用 `yum` 安装更多软件。
  - `ntpdate`: 用于手动同步系统时间。



### 4.3 网络连接验证

登录后第一件事，确认网络是否通畅。

1、Linux中查看IP地址的命令

```
ip addr
# 或者 (如果安装了net-tools)
# ifconfig
```

- **预期输出:** 你应该能看到类似 `ens33` (或其他名称) 的网卡信息，其中有 `inet` 后跟着的IP地址（例如 `192.168.xxx.xxx`，这是VMware NAT网络分配的私有IP）。

- **命令解析:** `ip addr` 是新一代的Linux网络配置命令，用于显示和管理网络接口。

- 效果如下:

  ```
  [bigdata@node1 ~]$ ip addr
  1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000
      link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
      inet 127.0.0.1/8 scope host lo
         valid_lft forever preferred_lft forever
      inet6 ::1/128 scope host
         valid_lft forever preferred_lft forever
  2: ens33: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc pfifo_fast state UP group default qlen 1000
      link/ether 00:0c:29:xx:xx:xx brd ff:ff:ff:ff:ff:ff  <-- MAC地址
      inet 192.168.110.130/24 brd 192.168.110.255 scope global dynamic noprefixroute ens33 <-- IP地址/子网掩码
         valid_lft 1787sec preferred_lft 1787sec
      inet6 fe80::xxxx:xxxx:xxxx:xxxx/64 scope link noprefixroute
         valid_lft forever preferred_lft forever
  ```

2、测试外部连接 (ping 网关和公网)

- **找到网关地址:**  可以在VMware的 "编辑(Edit)" -> "虚拟网络编辑器(Virtual Network Editor...)" -> 选中 "VMnet8 (NAT)" -> 点击 "NAT设置(NAT Settings...)" 查看网关IP。假设你的VM IP是`192.168.110.130`，网关可能是 `192.168.110.2`。

- ping 网关:

  ```
  ping -c 4 192.168.110.2   # 替换为你的实际网关IP
  ```

  - **预期输出:** 看到类似 `4 packets transmitted, 4 received, 0% packet loss` 的信息表示成功。按 `Ctrl+C` 可以停止 `ping`。
  - **命令解析:** `ping` 用于测试网络连通性。`-c 4` 表示发送4个探测包。

- ping 公网DNS或知名网站:

  ```
  ping -c 4 114.114.114.114  # 国内常用的公共DNS
  ping -c 4 www.baidu.com
  ```

  - **预期输出:** 同样看到类似 `0% packet loss` 的信息。如果 `ping` IP地址成功，但 `ping` 域名失败，说明是DNS解析问题。
  - **DNS检查:** `cat /etc/resolv.conf` 查看系统配置的DNS服务器地址，通常也是由VMware DHCP分配的（可能是你的网关地址）。



###  4.4 配置主机名与Hosts文件

虽然安装时设置了主机名，但最好再确认一下，并配置 `hosts` 文件。

1、永久设置主机名:

```
hostnamectl set-hostname node1
```

- 验证:

  ```
  hostnamectl
  # 或者
  hostname
  ```

2、配置 /etc/hosts 文件:

这个文件用于在DNS之前解析主机名到IP地址，通常用于本地或内部网络解析。

```
vim /etc/hosts
```

- 使用vim编辑:

  - 按 `i` 进入插入模式 (Insert mode)。

  - 在文件末尾添加一行，格式为 

    ```
    IP地址 主机名 别名(可选)
    ```

    。将虚拟机的IP地址和主机名关联起来。

    ```
    # (文件原始内容保留)
    127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4
    ::1         localhost localhost.localdomain localhost6 localhost6.localdomain6
    
    # 添加下面这行 (用你自己的VM IP替换 192.168.110.130)
    192.168.110.130 node1
    ```

  - 按 `Esc` 键退出插入模式。

  - 输入以下命令后，然后按键盘的Enter键

    ```shell
    # 输入冒号和wq
    :wq
    ```

     保存并退出vim。

    - `:w` 保存 (write)
    - `:q` 退出 (quit)
    - `:wq` 保存并退出
    - `:q!` 强制退出不保存


为什么配置hosts?

- **本地解析:** 让本机可以通过主机名 `node1` 直接访问自己对应的IP，某些软件配置会依赖这个。
- **集群内部解析:** 后续搭建Hadoop等集群时，需要在集群内所有节点的 `hosts` 文件中添加所有节点的 IP 和 主机名映射，让节点间可以通过主机名互相访问，这是很多大数据组件的要求。

验证:

```
ping node1
```



### 4.5 关闭防火墙和SELinux (仅限实验环境)

**警告:** 在生产环境中，防火墙和SELinux是重要的安全机制，**绝对不能**随意关闭！

SELinux：*作用*:主要*作用*是最大限度地减小系统中服务进程可访问的资源,遵循最小权限原则,降低系统遭受攻击的风险。

- **Enforcing**‌：强制执行策略，违反规则的操作被阻止并记录日志。 ‌
- ‌**Permissive**‌：记录违规操作但不阻止，用于排查问题。 ‌
- ‌**Disabled**‌：完全关闭SELinux保护。 ‌

但在我们的学习和实验环境中，它们可能会阻止某些端口的访问或服务的运行，带来不必要的麻烦。为了简化实验过程，我们暂时关闭它们。

1、关闭并禁用 Firewalld 防火墙:

```
sudo systemctl stop firewalld       # 停止当前运行的防火墙服务
sudo systemctl disable firewalld    # 禁止防火墙服务开机自启
sudo systemctl status firewalld     # 查看防火墙状态
```

> `sudo`
>
> - 通常在企业中，不会给数据开发人员提供`root`管理账号，只提供普通的账号
>   - 普通账号很多权限都没有
> - 当使用普通的账号去操作一些指令时，会因为权限问题，无法执行指令。此时需要添加上`sudo` 临时申请管理员权限

2、禁用 SELinux (Security-Enhanced Linux):

SELinux 提供了更细粒度的访问控制，但配置复杂，容易导致权限问题。

- 临时禁用 (当前会话生效，重启后恢复):

  ```shell
  # 输入以下命令
  setenforce 0
  ```

  - **验证:** 

    ~~~bash
    # 输入命令执行
    getenforce        # 命令执行后预期输出: Permissive
    ~~~

- 永久禁用 (需要修改配置文件并重启):

  ```
  vim /etc/selinux/config
  ```

  - 找到 `SELINUX=enforcing` 这一行。
  - 按 `i` 进入插入模式。
  - 将其修改为 `SELINUX=disabled`。
  - 按 `Esc`，输入 `:wq` 保存退出。
  - **此修改需要重启系统才能生效:**。 重启Linux系统命令：`reboot`

- 重启后验证（登录系统后执行）:

  ```
  getenforce
  ```

  - **预期输出:** `Disabled`

==**再次强调，生产环境应学习如何正确配置SELinux规则，而不是禁用它。**==



###  4.6 时间同步

集群环境中，节点间时间同步非常重要，否则会导致任务调度、数据一致性等问题。

1、手动同步时间 (使用ntpdate):

```
ntpdate ntp.aliyun.com  # 使用阿里云的NTP服务器
# 或者使用其他公共NTP服务器，如 ntp.ntsc.ac.cn (国家授时中心)
```

- **命令执行后预期输出:**  类似 `adjust time server ... offset ... sec` 的信息。

2、设置为定时任务 (使用crontab):

让系统每天自动同步一次时间。

- 编辑当前用户的crontab: `crontab -e` (首次编辑会让你选编辑器，选vim通常是 `/usr/bin/vim`)

- 按 `i` 进入插入模式，添加一行：

  ```
  # Example: Sync time every day at 3:00 AM
  0 3 * * * /usr/sbin/ntpdate ntp.aliyun.com > /dev/null 2>&1
  ```

  - 格式解释:

    ```
    分 时 日 月 周 命令
    ```

    - `0 3 * * *`: 表示每天的凌晨3点0分执行。
    - `/usr/sbin/ntpdate ntp.aliyun.com`: 要执行的命令。
    - `> /dev/null 2>&1`: 将标准输出和错误输出都重定向到空设备，避免产生不必要的邮件通知。

- 按 `Esc`，输入 `:wq` 保存退出。

- **查看已添加的任务:** `crontab -l`



### 4.7 使用VMware快照保存状态

在完成所有基础配置后，创建一个快照，相当于一个系统还原点。如果后续实验把系统搞坏了，可以快速恢复到这个干净的状态。

1. 在VMware Workstation中: 选中虚拟机 (确保它当前是关闭状态或运行状态都可以创建快照，但建议关机状态创建基础快照)。

2. 创建快照:

   - 右键点击虚拟机 -> "快照(Snapshot)" -> "拍摄快照(Take Snapshot...)"
   - 或者 菜单栏 "虚拟机(VM)" -> "快照(Snapshot)" -> "拍摄快照(Take Snapshot...)"

   ![image-20250413202107082](https://eo-oss.881119.xyz/Wenqin_Blog/Linux%E7%9B%B8%E5%85%B3%E5%91%BD%E4%BB%A4/Linux%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85/assets/image-20250413202107082.png)

   命名快照：输入一个描述性的名称，例如: `Clean Install + Initial Config`。

**管理快照:**可以通过 "虚拟机(VM)" -> "快照(Snapshot)" -> "快照管理器(Snapshot Manager...)" 来查看、恢复、删除快照。

**提示:** 后续进行大的软件安装或配置变更前，都建议先创建一个快照！





## 5. 软件安装

### 5.1 软件安装方式

在Linux系统中，安装软件的方式主要有四种，这四种安装方式的特点如下：

| 安装方式                        | 特点                                                         |
| ------------------------------- | ------------------------------------------------------------ |
| 二进制发布包安装                | 软件已经针对具体平台编译打包发布，只要解压，修改配置即可。例如tomcat |
| rpm(redhat package manager)安装 | 软件已经按照redhat的包管理规范进行打包，使用rpm命令进行安装，==但是包之间有可能具有依赖关系，因此不能自行解决库依赖问题，比较麻烦。== |
| yum安装                         | 一种在线软件安装方式，本质上还是rpm安装，自动下载安装包并安装，安装过程中自动解决库依赖问题(安装过程需要联网) |
| 源码编译安装                    | 软件以源码工程的形式发布，需要自己编译打包。类似.java文件需要编译成.class文件安装方式。第一个二进制发布包安装相当于直接拿到.class文件直接安装。 |



### 5.2 安装MySQL

#### 5.2.1 MySQL安装

对于MySQL数据库的安装，我们将要使用前面讲解的第二种安装方式rpm进行安装。那么首先我们先了解一下什么是rpm？

> **RPM：**全称为 Red-Hat Package Manager，RPM软件包管理器，是红帽Linux用于管理和安装软件的工具。

我们要通过rpm，进行MySQL数据库的安装，主要的步骤如下：

**1、检测当前Linux系统是否安装过MySQL相关数据库**

~~~bash
# 查询当前系统中安装的所有软件    rpm -qa	

# 查询当前系统中安装的名称带mysql的软件
rpm -qa | grep mysql  
# 查询当前系统中安装的名称带mariadb的软件
rpm -qa | grep mariadb	   
## 当前系统中存在mariadb数据库，是CentOS7中自带的，而这个数据库和MySQL数据库是冲突的，所以要想保证MySQL成功安装，需要卸载mariadb数据库。
~~~

> 通过rpm -qa 查询到系统通过rpm安装的所有软件，太多了，不方便查看，所以我们可以通过管道符 | 配合着grep进行过滤查询。
>
> 后续的Linux课程中会针对性的系统学习 grep 的使用

**2、卸载现有的MySQL数据库**

在rpm中，卸载软件的语法为： 

```shell
# 命令：rpm -e --nodeps  xxxxxxxxxx （已安装过的软件全名称）
rpm -e --nodeps  软件名称
```

如已安装过MySQL，将其卸载：

~~~bash
# 示例
rpm -e --nodeps  mysql-libs-5.1.71-1.el6.x86_64
~~~

卸载 mariadb，具体指令为： 

~~~bash
# 示例
rpm -e --nodeps  mariadb-libs-5.5.60-1.el7_5.x86_64
~~~

提示：执行完卸载命令之后， 再次查询 mysql和mariadb，如果查不到说明已经被成功卸载了。

**3、将资料中提供的MySQL安装包上传到Linux服务器中**

~~~bash
#1. 在Linux的根目录下，创建新目录：soft
cd /
mkdir soft

#2. 把mysql-community-5.6.45.tar.gz文件上传到soft目录（利用FinalShell客户端工具直接上传）

#3. 在/soft目录下新建mysql目录
mkdir /soft/mysql

#4. 解压mysql-community-5.6.45.tar.gz文件到mysql目录
tar -zxvf /soft/mysql-community-5.6.45.tar.gz -C /soft/mysql
~~~

4、使用rpm安装MySQL

~~~bash
### 前提：进入到mysql目录下
cd /soft/mysql

# 安装此路径所有安装包
rpm -ivh *.rpm --force --nodeps  
~~~

==【注意】：mysql-community-5.6.45tar.gz文件不能出现在mysql目录下==

5、安装过程省略........

6、安装MySQL完成后，修改默认编码（避免中文乱码问题）

~~~bash
# 1. 打开mysql配置文件
vim /etc/my.cnf    #mysql数据库安装完成之后，就会有一个my.cnf配置文件

# 2. 找到[mysqld] ，新增加如下内容：
character-set-server=utf8
collation-server=utf8_general_ci

# 3. 保存my.cnf文件
~~~



#### 5.2.2 MySQL启动

MySQL安装完成之后，会自动注册为系统的服务，服务名为`mysqld`。那么，我们就可以通过systemctl指令来查看mysql的状态、启动mysql、停止mysql。

```shell
# 查看mysql服务状态
systemctl status mysqld		

# 启动mysql服务
systemctl start mysqld	

# 停止mysql服务
systemctl stop mysqld		
```

> mysqld其实是SQL后台程序(也就是MySQL服务器)，它是关于服务器端的一个程序，mysqld意思是mysql daemon，在后台运行，监听3306端口，如果你想要使用客户端程序，这个程序必须运行，因为客户端是通过连接MySQL服务器程序来访问数据库的。

提示：可以设置开机时启动MySQL服务

~~~bash
# Linux系统开机运行后会自动启动MySQL服务 （场景：重启Linux系统后不用再手动开启MySQL）
systemctl enable mysqld
~~~

> 可以通过如下方式来判断MySQL是否启动：
>
> ~~~bash
> netstat -tunlp | grep mysql		  # 查看mysql的服务信息
> ps -aux | grep mysql			 # 查看mysql进程
> ~~~

 

#### 5.2.3 MySQL登录

在MySQL服务启动后，可以使用数据库中的默认管理员账户 `root`登录

~~~bash
# 1. 登录到mysql (root用户默认没有密码)
mysql -uroot   #首次登录，是没有密码的，在弹出要求输入密码时，按下：Enter

# 2. 修改登录用户的密码
set password = password('root');  #登录用户为root，密码也修改为root

# 3. 退出mysql
exit

# 4. 重新登录mysql
mysql –uroot –proot   # -u用户名 -p密码
~~~



#### 5.2.4 开启MySQL远程访问权限

为了安全性考虑，默认情况下mysql不支持远程登录，所以需要设置开启

~~~bash
### 以下命令在MySQL中执行

# 1. 设置root用户可以进行远程访问
grant all privileges on *.* to 'root'@'%' identified by 'root';  #权限设置

# 2. 刷新权限
flush privileges;
~~~



#### 5.2.5 开放Linux对外访问的3306端口

在生产环境下，要想正常访问MySQL服务器，还需要开放Linux系统防火墙的3306端口，执行如下指令

~~~bash
# 1. 开放的端口永久保存到防火墙  【Linux命令】
/sbin/iptables -I INPUT -p tcp --dport 3306 -j ACCEPT
firewall-cmd --zone=public --add-port=3306/tcp --permanent

# 2. 重启防火墙
systemctl restart firewalld
~~~

RPM软件安装：

1. 检测Linux系统中是否已安装过软件
2. 把软件安装包上传到Linux服务器中
3. 安装上传的软件包
4. 配置软件相关参数
5. 启动软件
6. 使用客户端工具访问软件


相关文档
---
1. **[Linux系统安装]({% post_url 2025-09-22-01Linux系统安装 %})**
2. [Linux命令]({% post_url 2025-09-22-02Linux命令 %})
3. [Shell命令]({% post_url 2025-09-22-03Shell %})
4. [Shell综合应用实战]({% post_url 2025-09-22-04Shell综合应用实战 %})
5. [Liunx文本处理]({% post_url 2025-09-22-05Liunx文本处理 %})







